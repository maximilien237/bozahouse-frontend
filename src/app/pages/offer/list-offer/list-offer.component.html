
<div class="container spacer  ">
  <div class="text-center">
    <!-- sidebar left -->
    <button  type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasWithBothOptions" aria-controls="offcanvasWithBothOptions"><i class="bi bi-search"></i>rechercher </button>

    <div class="offcanvas offcanvas-start col-md-4 bg-dark" style="background-color: ghostwhite" data-bs-scroll="true" tabindex="-1" id="offcanvasWithBothOptions" aria-labelledby="offcanvasWithBothOptionsLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title text-light" id="offcanvasWithBothOptionsLabel">Filter les offres</h5>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">

        <div class="card bg-dark" style="font-size: 15px;">
<!--          <h5 class="card-header text-warning"><i class="bi bi-search"></i>Rechercher </h5>-->
          <div class="card-body bg-dark" >

            <form class="text-light" [formGroup] = "offerFormGroup" (ngSubmit)="handleFilterOffers()" >

              <div class="mb-3 mt-2">
                <label class="form-label">Métier </label>
                <input type="text" class="form-control" formControlName = "title" placeholder="Infimier">
              </div>


              <div class="mb-3 mt-2">
                <label class="form-label">Contract </label>
                <select class="form-select" formControlName = "contract" >
                  <option value="" disabled selected>Contract</option>
                  <option value="CDI">CDI</option>
                  <option value="CDD">CDD</option>
                  <option value="FREELANCE">Freelance</option>
                  <option value="INTERIM">Intérim</option>
                  <option value="ASSOCIE">Associé(e)</option>
                  <option value="ALTERNANCE">Alternance</option>
                  <option value="FRANCHISE">Franchise</option>
                  <option value="STAGE ACADEMIC">Stage academic</option>
                  <option value="STAGE PROFESSIONNELLE">Stage professionnelle</option>
                </select>
              </div>


              <div class="mb-3 mt-2">
                <label class="form-label">Mode de travail </label>
                <select class="form-select" formControlName = "workMode">
                  <option value="" disabled selected >Mode de travail</option>
                  <option value="Sur site">Sur site</option>
                  <option value="A distance">A distance</option>
                </select>
              </div>

              <div class="mb-3 mt-2">
                <label class="form-label">Adress </label>
                <input type="text" class="form-control" formControlName = "address" placeholder="Simbok,Yaoundé,Cameroun" >
              </div>

              <!--              <div class="mb-3 mt-2">
                              <input type="text" class="form-control" formControlName = "countryName"  placeholder="Pays, ex: Cameroun">
                            </div>


                            <div class="mb-3 mt-2">
                              <input type="text" class="form-control" formControlName = "cityName"  placeholder="Ville, ex: Bertoua">
                            </div>-->

              <!--

               <div class="mb-3">
                     <label class="form-label">Salaire</label>
                     <input type="text" class="form-control" formControlName = "salary" value="A définir avec l'employeur" required>
                   </div>
         -->

              <div class="mb-3 mt-2">
                <label class="form-label">Expérience </label>
                <select class="form-select" formControlName = "experience" >
                  <option value="" disabled selected>Experience</option>
                  <option value="Aucune">Aucune</option>
                  <option value="Jeune diplomé">Jeune diplomé</option>
                  <option value="1-2 ans">1-2 ans</option>
                  <option value="3-5 ans">3-5 ans</option>
                  <option value="6-10 ans">6-10 ans</option>
                  <option value="11-20 ans">11-20 ans</option>
                  <option value="+20 ans">plus de 20 ans</option>
                </select>
              </div>


              <div class="mb-3">
                <label class="form-label">Type d'employeur</label>
                <select class="form-select" formControlName = "type" >
                  <option value=""  selected disabled>Type d'employeur</option>
                  <option value="particular">Particulier</option>
                  <option value="enterprise">Entreprise</option>
                </select>
              </div>

              <div class="mb-3 mt-2">
                <label class="form-label">Domaine </label>
                <input type="text" class="form-control" formControlName = "domain"  placeholder="Informatique">
              </div>

<!--
              <div class="mb-3 mt-2">
                <label class="form-label">Date de début</label>
                <input type="date" class="form-control" formControlName = "startDate" >
                <small *ngIf="offerFormGroup.controls['startDate'].errors && offerFormGroup.controls['startDate'].touched" class="text-danger">{{getErrorMessage('startDate', offerFormGroup.controls['startDate'].errors)}}</small>

              </div>

              <div class="mb-3 mt-2 mb-2">
                <label class="form-label">Date de fin</label>
                <input type="date" class="form-control" formControlName = "endDate" >
                <small *ngIf="offerFormGroup.controls['endDate'].errors && offerFormGroup.controls['endDate'].touched" class="text-danger">{{getErrorMessage('endDate', offerFormGroup.controls['endDate'].errors)}}</small>

              </div>

              <div class="mb-3">
                <label for="disabledRange" class="form-label">Salaire</label>
                <input type="range" class="form-range" min="30000" max="1000000" step="0.25" id="disabledRange">
              </div>-->

              <div class="text-center">
                <button  class="btn btn-outline-light" type="submit">rechercher&nbsp;<i class="bi bi-search"></i> </button>&nbsp;&nbsp;&nbsp;
                <span class="btn btn-outline-danger" (click)="handleSetOfferFormGroup()">reset</span>
              </div>

            </form>

          </div>
        </div>


      </div>
    </div> &nbsp;&nbsp;&nbsp;&nbsp;

    <ng-container>
      <span style="font-size: 20px;">
      <a routerLink="/addOffer" class="hide-underline-link btn btn-dark text-warning">
      <i class="bi bi-plus "></i> publier une offre
      </a>
    </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </ng-container>

<!--    <span><a *ngIf="currentUser.hostSubscriptionCounter >= 1 || currentUser.normalSubscriptionCounter >=1" routerLink="/addTestimony" class="hide-underline-link btn btn-dark text-warning">Rédiger un avis</a> </span>-->



  </div><br>
  <div class="card bg-secondary border-0">

    <h5 class="text-center mt-2">Vos derniers jobs</h5>

    <div class="row">

<ng-container>
  <ng-container *ngIf="offers ; else failureOrLoading">
    <div  *ngFor="let offer of offers  | paginate: { itemsPerPage: 6, currentPage: currentPage, totalItems: totalElements }"  class="col-md-4 ">
      <div class="card  spacer-margin bg-dark">

        <div *ngIf="isAdmin" class="card-header">

          <a (click)="handleDisableOffer(offer)" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-down"></i>
          </a>&nbsp;&nbsp;&nbsp;&nbsp;

          <a (click)="handleUpdateOffer(offer.id)" class="btn btn-warning">
            <i class="bi bi-pencil"></i>
          </a> &nbsp;&nbsp;&nbsp;&nbsp;

          <a (click)="handleDeleteOffer(offer)" class="btn btn-danger">
            <i class="bi bi-trash"></i>
          </a>

        </div>
        <div class="card-body text-center" >
          <span class="text-warning" style="font-size: 35px;">{{offer.title}}</span><br>
          <span class="text-light" *ngIf="offer.type=='particular' else ent">Auteur : [ Particulier ]</span><br>
          <ng-template #ent>
            <span class="text-light">Auteur : [ Entreprise ]</span>
          </ng-template>
          <span class="text-muted" style=" font-size: 15px"><i class="bi bi-geo-alt-fill" style="font-size: 20px;"></i> {{offer.address}}</span><br />
          <span class="text-muted" style="font-size: 15px"><i class="bi bi-book-fill">&nbsp;</i>{{offer.contract}}</span> &nbsp;&nbsp;
          <ng-container *ngIf="offer.workMode == 'Sur site'">
            <span class="text-muted" style="font-size: 15px" ><i class="bi bi-house-fill"></i> {{offer.workMode}} </span><br />
          </ng-container>

          <ng-container *ngIf="offer.workMode == 'A distance'">
            <span class="text-muted" style="font-size: 15px" ><i class="bi bi-wifi"></i> {{offer.workMode}} </span><br />
          </ng-container>



          <span *ngIf="offer.salary == ''; else other">
        <span style="color: #bb2d3b; font-size: 20px"> Salaire à définir avec l'employeur </span><br />
      </span>

          <ng-template #other>
            <span style="color: #bb2d3b; font-size: 20px"> {{offer.salary | number: '1.0-0'}} FCFA</span><br />
          </ng-template>


          <div class="text-muted">
            <span ><i class="bi bi-calendar"></i>&nbsp;<span>{{offer.publishedAt | date : 'd MMM y'}}</span></span>&nbsp;-- <span ><i class="bi bi-lock-fill"></i> <span>{{offer.endOffer | date : 'd MMM y'}}</span></span>
          </div><br>

          <ng-container>

              <span><a (click)="handleDetailOffer(offer.id)" class="btn btn-warning rounded-pill">Voir l'offre</a></span><br>

          </ng-container>

        </div>
<!--        <span class="text-muted card-footer btn" style=" font-size: 18px" (click)="shared()">partager &nbsp;<i class="bi bi-share-fill"></i></span>-->
      </div>
    </div>
  </ng-container>
  <ng-template #failureOrLoading>
    <ng-container *ngIf="errorMessageOffer; else Loading">
      <div class="text-warning text-center spacer-margin">
        <span>Oups ! pas de données pour le moment</span>
      </div>
    </ng-container>

    <ng-template #Loading>

      <div class="d-flex justify-content-center spacer-margin" >
        <div class=" spinner-border text-warning" style="width: 3rem; height: 3rem;" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
    </ng-template>

  </ng-template>
</ng-container>

    </div>

    <div class="d-flex justify-content-center">
      <pagination-controls (pageChange)="goToPage($event)"></pagination-controls>
    </div>

  </div >


</div>


<div class="text-end mb-3 spacer-right">
  <span><a routerLink="/addTestimony" class="hide-underline-link btn btn-dark text-warning">Rédiger un avis</a> </span>

</div>




