<html class="bg-secondary">
<body class="bg-secondary">

<app-header></app-header>


<div class="container mt-lg-5 spacer-bottom">

    <div class="card bg-secondary border-0">
  <div class="row">
    <!-- list roles -->
    <div class="container col-md-5  mt-3" >
      <ng-container *ngIf="roles | async as listRoles; else failureOrLoading">
        <div  class="card bg-dark" style="margin-bottom: 80px">
          <h5 class="card-header text-white">Role</h5>

          <div class="card-body">

            <table class="table table-responsive table-bordered ">
              <thead class="text-white">
              <tr>
<!--                <th>ID</th>-->
                <th>roleName</th>
                <th>Actions</th>
              </tr>
              </thead>

              <tbody>
              <tr class="text-white" *ngFor="let role of roles | async">
<!--                <td>{{role.id}}</td>-->
                <td>{{role.name}}</td>
                <td>
                  <a (click)="handleDetailAppRole(role.id)" class="btn btn-secondary">
                    <i class="bi bi-eye"></i>
                  </a>

                  <a (click)="handleUpdateAppRole(role.id)" class="btn btn-warning">
                    <i class="bi bi-pencil"></i>
                  </a>

                  <a (click)="handleDeleteRole(role)" class="btn btn-danger">
                    <i class="bi bi-trash"></i>
                  </a>
                </td>
              </tr>
              </tbody>

            </table>

            <ul class=" nav nav-pills spacer-left spacer-bottom">
              <ng-container *ngIf="currentPage != 0">
                <li >
                  <a class="page-link btn ms-1" (click)="goToPage(currentPage - 1)" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                  </a>
                </li>
              </ng-container>

              <li *ngFor="let item of [].constructor(totalPages); let page = index" >
                <a [ngClass]="page==currentPage?'btn-warning':'btn-outline-warning'" (click)="goToPage(page)" class="btn ms-1"  >{{page}}</a>
              </li>
              <ng-container *ngIf="currentPage != totalPages - 1">
                <li >
                  <a class="page-link btn ms-1" (click)="goToPage(currentPage + 1)" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                  </a>
                </li>
              </ng-container>

            </ul>

          </div>
        </div>
      </ng-container>


      <ng-template #failureOrLoading>
        <ng-container *ngIf="errorMessage; else loading">
          <div class="text-warning spacer-margin text-center">
            <strong><span>Oups ! plus de donn√©es.</span><br /></strong>
            <a class="btn btn-success" (click)="reloadPage()"><i class="bi bi-arrow-counterclockwise"></i>&nbsp; Revenir</a>
          </div>
        </ng-container>

        <ng-template #loading>

          <div class="d-flex justify-content-center spacer-margin" >
            <div class=" spinner-border text-info" style="width: 3rem; height: 3rem;" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
          </div>
        </ng-template>

      </ng-template>

    </div>


    <!-- create role -->

    <div class="container col-md-3 mt-3" >
      <div class="card bg-dark" style="margin-bottom: 80px">

        <div class="card-header text-white text-center"> New role</div>
        <div class="card-body">
          <form [formGroup] = "newRoleFormGroup" (ngSubmit)="handleSaveRole()">

            <div class="mb-3">
              <label class="form-label text-white">Quel est le role ?</label>
              <input type="text" formControlName = "name" class="form-control">
              <small *ngIf="newRoleFormGroup.controls['name'].errors && newRoleFormGroup.controls['name'].touched" class="text-danger">{{getErrorMessage('name', newRoleFormGroup.controls['name'].errors)}}</small>

            </div>

            <div class="text-center">
              <button [disabled] = "!newRoleFormGroup.valid" class="btn btn-warning">Valider</button>
            </div>


          </form>
        </div>
      </div>
    </div>

    <!-- -->

  </div>

    </div>
</div>

<div class="spacer-margin text-center">
  <a class="btn btn-warning" routerLink="/users">Retour</a>
</div>

<app-footer></app-footer>


</body>
</html>

